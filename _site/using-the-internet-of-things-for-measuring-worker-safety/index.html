<!DOCTYPE html>
<html lang="pt-br">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Using the Internet of Things for measuring Worker Safety</title>
    <meta name="description" content="Personal Blog and Data Repository">

    <!-- Google Authorship Markup -->
    <link rel="author" href="https://plus.google.com/+?rel=author">

    <!-- Social: Facebook / Open Graph -->
    <meta property="og:url" content="http://localhost:3000/using-the-internet-of-things-for-measuring-worker-safety/">
    <meta property="og:title" content="Using the Internet of Things for measuring Worker Safety">
    
    <meta property="og:image" content="http://localhost:3000/assets/img/">
    
    <meta property="og:description" content="Personal Blog and Data Repository">
    <meta property="og:site_name" content="">

    <!-- Social: Google+ / Schema.org  -->
    <meta itemprop="name" content="Using the Internet of Things for measuring Worker Safety"/>
    <meta itemprop="description" content="Personal Blog and Data Repository">
    <meta itemprop="image" content="http://localhost:3000/assets/img/blog-image.png"/>

    <!-- Favicon -->
    <link rel="shortcut icon" href="/assets/img/icons/favicon.ico" type="image/x-icon" />
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/assets/img/icons/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png" />
    <!-- Windows 8 Tile Icons -->
    <meta name="application-name" content="hrishioa Blog">
    <meta name="msapplication-TileColor" content="#0562DC">
    <meta name="msapplication-square70x70logo" content="smalltile.png" />
    <meta name="msapplication-square150x150logo" content="mediumtile.png" />
    <meta name="msapplication-wide310x150logo" content="widetile.png" />
    <meta name="msapplication-square310x310logo" content="largetile.png" />
    <!-- Android Lolipop Theme Color -->
    <meta name="theme-color" content="#0562DC">

    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="http://localhost:3000/using-the-internet-of-things-for-measuring-worker-safety/">
    <link rel="alternate" type="application/rss+xml" title="" href="http://localhost:3000/feed.xml" />
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>

    <body>
        <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69264120-1', 'auto');
  ga('send', 'pageview');

</script>

        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none" version="1.1"><defs><symbol id="icon-menu" viewBox="0 0 1024 1024"><path class="path1" d="M128 213.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 725.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 469.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5z"/></symbol><symbol id="icon-search" viewBox="0 0 951 1024"><path class="path1" d="M658.286 475.429q0-105.714-75.143-180.857t-180.857-75.143-180.857 75.143-75.143 180.857 75.143 180.857 180.857 75.143 180.857-75.143 75.143-180.857zM950.857 950.857q0 29.714-21.714 51.429t-51.429 21.714q-30.857 0-51.429-21.714l-196-195.429q-102.286 70.857-228 70.857-81.714 0-156.286-31.714t-128.571-85.714-85.714-128.571-31.714-156.286 31.714-156.286 85.714-128.571 128.571-85.714 156.286-31.714 156.286 31.714 128.571 85.714 85.714 128.571 31.714 156.286q0 125.714-70.857 228l196 196q21.143 21.143 21.143 51.429z"/></symbol><symbol id="icon-email" viewBox="0 0 1024 1024"><path class="path1" d="M950.857 859.429v-438.857q-18.286 20.571-39.429 37.714-153.143 117.714-243.429 193.143-29.143 24.571-47.429 38.286t-49.429 27.714-58.571 14h-1.143q-27.429 0-58.571-14t-49.429-27.714-47.429-38.286q-90.286-75.429-243.429-193.143-21.143-17.143-39.429-37.714v438.857q0 7.429 5.429 12.857t12.857 5.429h841.143q7.429 0 12.857-5.429t5.429-12.857zM950.857 258.857v-14t-0.286-7.429-1.714-7.143-3.143-5.143-5.143-4.286-8-1.429h-841.143q-7.429 0-12.857 5.429t-5.429 12.857q0 96 84 162.286 110.286 86.857 229.143 181.143 3.429 2.857 20 16.857t26.286 21.429 25.429 18 28.857 15.714 24.571 5.143h1.143q11.429 0 24.571-5.143t28.857-15.714 25.429-18 26.286-21.429 20-16.857q118.857-94.286 229.143-181.143 30.857-24.571 57.429-66t26.571-75.143zM1024 237.714v621.714q0 37.714-26.857 64.571t-64.571 26.857h-841.143q-37.714 0-64.571-26.857t-26.857-64.571v-621.714q0-37.714 26.857-64.571t64.571-26.857h841.143q37.714 0 64.571 26.857t26.857 64.571z"/></symbol><symbol id="icon-close" viewBox="0 0 805 1024"><path class="path1" d="M741.714 755.429q0 22.857-16 38.857l-77.714 77.714q-16 16-38.857 16t-38.857-16l-168-168-168 168q-16 16-38.857 16t-38.857-16l-77.714-77.714q-16-16-16-38.857t16-38.857l168-168-168-168q-16-16-16-38.857t16-38.857l77.714-77.714q16-16 38.857-16t38.857 16l168 168 168-168q16-16 38.857-16t38.857 16l77.714 77.714q16 16 16 38.857t-16 38.857l-168 168 168 168q16 16 16 38.857z"/></symbol><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"/></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"/></symbol><symbol id="icon-rss" viewBox="0 0 805 1024"><path class="path1" d="M219.429 768q0 45.714-32 77.714t-77.714 32-77.714-32-32-77.714 32-77.714 77.714-32 77.714 32 32 77.714zM512 838.286q1.143 16-9.714 27.429-10.286 12-26.857 12h-77.143q-14.286 0-24.571-9.429t-11.429-23.714q-12.571-130.857-105.429-223.714t-223.714-105.429q-14.286-1.143-23.714-11.429t-9.429-24.571v-77.143q0-16.571 12-26.857 9.714-9.714 24.571-9.714h2.857q91.429 7.429 174.857 46t148 103.714q65.143 64.571 103.714 148t46 174.857zM804.571 839.429q1.143 15.429-10.286 26.857-10.286 11.429-26.286 11.429h-81.714q-14.857 0-25.429-10t-11.143-24.286q-6.857-122.857-57.714-233.429t-132.286-192-192-132.286-233.429-58.286q-14.286-0.571-24.286-11.143t-10-24.857v-81.714q0-16 11.429-26.286 10.286-10.286 25.143-10.286h1.714q149.714 7.429 286.571 68.571t243.143 168q106.857 106.286 168 243.143t68.571 286.571z"/></symbol><symbol id="icon-google-plus" viewBox="0 0 951 1024"><path class="path1" d="M420 454.857q0 20.571 18.286 40.286t44.286 38.857 51.714 42 44 59.429 18.286 81.143q0 51.429-27.429 98.857-41.143 69.714-120.571 102.571t-170.286 32.857q-75.429 0-140.857-23.714t-98-78.571q-21.143-34.286-21.143-74.857 0-46.286 25.429-85.714t67.714-65.714q74.857-46.857 230.857-57.143-18.286-24-27.143-42.286t-8.857-41.714q0-20.571 12-48.571-26.286 2.286-38.857 2.286-84.571 0-142.571-55.143t-58-139.714q0-46.857 20.571-90.857t56.571-74.857q44-37.714 104.286-56t124.286-18.286h238.857l-78.857 50.286h-74.857q42.286 36 64 76t21.714 91.429q0 41.143-14 74t-33.714 53.143-39.714 37.143-34 35.143-14 37.714zM336.571 400q21.714 0 44.571-9.429t37.714-24.857q30.286-32.571 30.286-90.857 0-33.143-9.714-71.429t-27.714-74-48.286-59.143-66.857-23.429q-24 0-47.143 11.143t-37.429 30q-26.857 33.714-26.857 91.429 0 26.286 5.714 55.714t18 58.857 29.714 52.857 42.857 38.286 55.143 14.857zM337.714 898.857q33.143 0 63.714-7.429t56.571-22.286 41.714-41.714 15.714-62.286q0-14.286-4-28t-8.286-24-15.429-23.714-16.857-20-22-19.714-20.857-16.571-23.714-17.143-20.857-14.857q-9.143-1.143-27.429-1.143-30.286 0-60 4t-61.429 14.286-55.429 26.286-39.143 42.571-15.429 60.286q0 40 20 70.571t52.286 47.429 68 25.143 72.857 8.286zM800.571 398.286h121.714v61.714h-121.714v125.143h-60v-125.143h-121.143v-61.714h121.143v-124h60v124z"/></symbol><symbol id="icon-angle-down" viewBox="0 0 658 1024"><path class="path1" d="M614.286 420.571q0 7.429-5.714 13.143l-266.286 266.286q-5.714 5.714-13.143 5.714t-13.143-5.714l-266.286-266.286q-5.714-5.714-5.714-13.143t5.714-13.143l28.571-28.571q5.714-5.714 13.143-5.714t13.143 5.714l224.571 224.571 224.571-224.571q5.714-5.714 13.143-5.714t13.143 5.714l28.571 28.571q5.714 5.714 5.714 13.143z"/></symbol><symbol id="icon-github-alt" viewBox="0 0 951 1024"><path class="path1" d="M365.714 694.857q0 22.857-7.143 46.857t-24.571 43.429-41.429 19.429-41.429-19.429-24.571-43.429-7.143-46.857 7.143-46.857 24.571-43.429 41.429-19.429 41.429 19.429 24.571 43.429 7.143 46.857zM731.429 694.857q0 22.857-7.143 46.857t-24.571 43.429-41.429 19.429-41.429-19.429-24.571-43.429-7.143-46.857 7.143-46.857 24.571-43.429 41.429-19.429 41.429 19.429 24.571 43.429 7.143 46.857zM822.857 694.857q0-68.571-39.429-116.571t-106.857-48q-23.429 0-111.429 12-40.571 6.286-89.714 6.286t-89.714-6.286q-86.857-12-111.429-12-67.429 0-106.857 48t-39.429 116.571q0 50.286 18.286 87.714t46.286 58.857 69.714 34.286 80 16.857 85.143 4h96q46.857 0 85.143-4t80-16.857 69.714-34.286 46.286-58.857 18.286-87.714zM950.857 594.286q0 118.286-34.857 189.143-21.714 44-60.286 76t-80.571 49.143-97.143 27.143-98 12.571-95.429 2.571q-44.571 0-81.143-1.714t-84.286-7.143-87.143-17.143-78.286-29.429-69.143-46.286-49.143-65.714q-35.429-70.286-35.429-189.143 0-135.429 77.714-226.286-15.429-46.857-15.429-97.143 0-66.286 29.143-124.571 61.714 0 108.571 22.571t108 70.571q84-20 176.571-20 84.571 0 160 18.286 60-46.857 106.857-69.143t108-22.286q29.143 58.286 29.143 124.571 0 49.714-15.429 96 77.714 91.429 77.714 227.429z"/></symbol></defs></svg>

        <header class="header-post" role="banner">
    <div class="content">
        
            <time itemprop="datePublished" datetime="2015-10-11 07:54:55 +0530" class="date">11 Oct 2015</time>
        
        <h1 class="post-title" itemprop="name">Using the Internet of Things for measuring Worker Safety</h1>
        <p itemprop="description" class="subtitle"></p>
    </div>
     <a class="down" data-scroll href="#scroll"><svg class="icon icon-angle-down"><use xlink:href="#icon-angle-down"></use></svg></a>
     <div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search...">
        <svg class="icon-remove-sign"><use xlink:href="#icon-close"></use></svg>
        <ul class="search-results search-list"></ul>
    </div>
</div>

<div id="fade" class="overlay"></div>
<a id="slide" class="slideButton fade">
    <svg id="open" class="icon-menu"><use xlink:href="#icon-menu"></use></svg>
    <svg id="close" class="icon-menu"><use xlink:href="#icon-close"></use></svg>
</a>
<aside id="sidebar">
<nav id="navigation">
  <h2>MENU</h2>
  <ul>
    
      <li><a href="http://localhost:3000/">Home</a></li>
    
      <li><a href="http://localhost:3000/series">Series</a></li>
    
      <li><a href="http://localhost:3000/tags">Tags</a></li>
    
      <li><a href="http://localhost:3000/about">About Me</a></li>
    
    <li><a class="feed" href="http://localhost:3000/feed.xml" title="Atom/RSS feed">Feed</a></li>
  </ul>
</nav>
</aside>
<a id="search" class="dosearch">
    <svg class="icon-menu icon-search"><use xlink:href="#icon-search"></use></svg>
</a>
</header>

        <section class="post" itemscope itemtype="http://schema.org/BlogPosting">

            <article role="article" id="scroll" class="post-content" itemprop="articleBody">
                <p>As much as I hate using the phrase “Internet of Things”, I must admit that it’s gotten a lot easier to do so, having used it so many times during, *sigh* <a href="http://iothackathon.sg/">The Internet of Things hackathon</a>. During the hackathon, we were given different pieces of hardware, a collection of sensors and asked to build sometthing related to one of three themes: <strong>Transport, Health and Construction</strong>. We arrived at the hackathon, and realised that due to the preliminary selection process, there were a total of 10 teams. <em>For six prizes</em>. One for each category, and a 1st, 2nd and 3rd prize overall.</p>

<p>We decided to go with Construction. It had nothing to do with the fact that there was only one other team in the category (sometimes it doesn’t hurt to play the odds). Thinking about the issues in construction, we were delighted to find that one of our members - Aaron - could find out first hand from his father about the primary pain points in construction. We wanted to make sure we found something that solved problems for both workers and contractors to improve the possibility for adoption.</p>

<h2 id="the-problem">The Problem</h2>

<p>We were surprised to learn that - despite implementing a number of stringent safety protocols at construction sites - Singapore has had a number of incidents, with a small but non-zero number of casualties. We wanted to improve worker safety, and at the same time provide an incentive to contractors to fork out the costs of implementing the system. We devised a two part system, each based on a similar array of sensors.</p>

<h3 id="part-1---worker-safety">Part 1 - Worker Safety</h3>

<p>The system would use an accelerometer along with temperature and humidity sensors to monitor working conditions. The accelerometer would provide fall or impact detection, to provide quick response to accidents. The air quality sensor and temperature probe would monitor working conditions and provide a way for the ministry to assess the conditions of the workers directly. They could not be tampered with, and this provided for a better way to access the data compared to site inspections which we suspected the employers would prepare for.</p>

<h3 id="part-2---workforce-redistribution">Part 2 - Workforce Redistribution</h3>

<p>Using the accelerometer, we were able to compile an index of activity per worker that displayed how active a certain worker was during his day. Without providing the employers access to raw data, we dynamically detected active and idle parameters to provide an estimate of how over- (or under) worked the workforce was. The employer could use this information to redistribute his workforce to ensure optimum productivity. Such load balancing would also be beneficial to the workers and prevent understaffing in areas that required more workers.</p>

<p>Having completed the concept, we moved on to implementation.</p>

<h1 id="implementation">Implementation</h1>

<p>The implementation process was fairly smooth, but from the outset we needed three basic elements to implement the functionality.</p>

<h2 id="hardware">Hardware</h2>

<h3 id="processor">Processor</h3>

<p>We were provided the new development board from MediaTek Labs, the LinkIT One. Based on the Mediatek MT2502 SoC, the board provided Arduino-compatible ARM Development.</p>

<p><img src="http://localhost:3000/assets/img/IOTHacks/package-linkit-one.png" alt="linkitOne" /></p>

<p>To their credit, the SDK was pretty simple to install on Windows and Mac. Despite our distaste for it, we resorted to using the Arduino IDE to save time. Using the IDE meant that we could not have an Operating System running concurrent tasks. This meant that the while data was being streamed to a server, the sensors could not be reliably operated. However, considering the scope of the prototype for the hackathon and the time constraint of 24 hours, this was considered an acceptable trade-off.</p>

<h3 id="sensors">Sensors</h3>

<p>We made use of the sensor kit provided at the Hackathon for the LinkIT One. We were surprised to find that it contained all the sensors we required, and we appreciated the Li-ion battery and charger included.</p>

<p><img src="http://localhost:3000/assets/img/IOTHacks/linkit-kit.jpg" alt="linkitkit" /></p>

<h3 id="web-frontend">Web Frontend</h3>

<p>For the purposes of demonstration, we decided to use <a href="http://app.ubidots.com">Ubidot</a> as our IoT streaming platform. The prototype would send POST requests to the service API with aggregated sensor data, and we could use any online dashboard to demonstrate the proof-of-concept. This simplified things on our end, meaning that we did not have to build a complete frontend from scratch anymore. The catch was that all aggregation and backend processing would have to be done on the client-side, which meant that we would lose more cycles on the LinkIT. Despite this, we felt that the time saved in building the UI more than made up for this loss.</p>

<p><img src="http://localhost:3000/assets/img/IOTHacks/ubodots.png" alt="ubikit Platform" /></p>

<p>Now that we had the infrastructure ready, we moved on to implementation.</p>

<h2 id="software">Software</h2>

<p>The first task was to ensure that the Wifi-connectivity on the LinkIT functioned well enough for us to use it for streaming. From an overall evaluation of the system, we were quite sure that it was upto the task, but we wanted to make sure that it still performed reliably when operated from the bloated Arduino IDE while simulatenously pulling sensor data and peforming analytics.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="c1">//Wifi Request Variables </span>
<span class="kt">char</span> <span class="n">action</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&quot;POST &quot;</span><span class="p">;</span>
<span class="kt">char</span> <span class="n">server</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&quot;things.ubidots.com&quot;</span><span class="p">;</span>
<span class="kt">char</span> <span class="n">path</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&quot;/api/v1.6/variables/####################/values&quot;</span><span class="p">;</span>
<span class="kt">char</span> <span class="n">token</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&quot;##########################&quot;</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">port</span> <span class="o">=</span> <span class="mi">80</span><span class="p">;</span> <span class="c1">// HTTP</span>

<span class="n">LWiFiClient</span> <span class="n">c</span><span class="p">;</span>

<span class="c1">//Send requests</span>
<span class="c1">//Build JSON</span>
<span class="n">var</span> <span class="o">=</span> <span class="s">&quot;{</span><span class="se">\&quot;</span><span class="s">value</span><span class="se">\&quot;</span><span class="s">:&quot;</span><span class="o">+</span><span class="n">String</span><span class="p">(</span><span class="n">avg_accel</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;,</span><span class="se">\&quot;</span><span class="s">Acceleration</span><span class="se">\&quot;</span><span class="s">:12.345,</span><span class="se">\&quot;</span><span class="s">user</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">toonistic@gmail.com</span><span class="se">\&quot;</span><span class="s">}&quot;</span><span class="p">;</span>

<span class="k">while</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">c</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">server</span><span class="p">,</span> <span class="mi">80</span><span class="p">))</span>
<span class="p">{</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Re-Connecting to WebSite&quot;</span><span class="p">);</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">//....Print all relevant data to server using c</span>

<span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;POST Posted: var = &quot;</span><span class="o">+</span><span class="n">var</span><span class="p">);</span></code></pre></div>

<p>Our JSON Builder was mostly our editor, but we didn’t want to incur the memory penalty of adding a JSON Library to our Code.</p>

<p>Before we could test it, we needed to collect data from our sensors. This proved to be quite straightforward, and (after an hour of looking for valid libraries) we wrote some I2C code ourselves that managed this task. The complete code is at the link at the end of this post, and it’s fairly long.</p>

<p>We then ran a few tests and found that the POST requests held up the system for as much as two seconds, and we implemented interrupt routines that simply averaged the data over this period of time. We reduced our resolution a great deal in doing this, but none of the data would be lost. Given time, we wanted to implement transient detection and noise reduction, but we decided to leave it for another day.</p>

<p>Now that we were successfully accessing sensor data and uploading it to our front-end, we needed to perform analytics that would hide raw data from the consumer and prevent exploitation. For this end we implemented two singular scores on each side. The first we called the <code>Safety Score</code>. In a number, it would provide an analysis of worker safety conditions. The closer to zero you are, the safer you are.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">temp_var</span> <span class="o">=</span> <span class="p">((</span><span class="n">temp_var</span><span class="o">*</span><span class="n">datapoints</span><span class="p">)</span><span class="o">+</span><span class="n">abs</span><span class="p">(</span><span class="n">temp</span><span class="o">-</span><span class="n">ideal_temp</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="n">datapoints</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="n">humid_var</span> <span class="o">+=</span> <span class="p">((</span><span class="n">temp_var</span><span class="o">*</span><span class="n">datapoints</span><span class="p">)</span><span class="o">+</span><span class="n">abs</span><span class="p">(</span><span class="n">humid</span><span class="o">-</span><span class="n">ideal_humid</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="n">datapoints</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="n">avg_accel</span> <span class="o">&gt;</span> <span class="n">accel_thres</span><span class="p">)</span>
  <span class="n">accel_var</span><span class="o">++</span><span class="p">;</span>
  
<span class="n">safety_score</span> <span class="o">=</span> <span class="p">((</span><span class="n">temp_var</span><span class="o">*</span><span class="mf">0.001</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="n">humid_var</span><span class="o">*</span><span class="mf">0.001</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="n">accel_var</span><span class="o">*</span><span class="mf">0.1</span><span class="p">));</span></code></pre></div>

<p>Temperatures and humidity beyond a pre-set threshold would increase the safety score, along with falls and incidents and anomalies in accelerometer data.</p>

<p>The second part, which we called the <code>Productivity Score</code> would aggregate accelerometer data, compare it against a dynamic threshold for activity, and update the system on the percentage of activity in a certain day. If you worked for six hours total in a span of eight hours, your score would be <code>0.75</code>.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">avg_accel</span> <span class="o">=</span> <span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">Axyz</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="n">abs</span><span class="p">(</span><span class="n">Axyz</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="n">abs</span><span class="p">(</span><span class="n">Axyz</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span><span class="o">/</span><span class="mi">3</span><span class="p">;</span>

<span class="k">if</span><span class="p">(</span><span class="n">avg_accel</span><span class="o">&gt;</span><span class="n">max_accel</span><span class="p">)</span>
  <span class="n">max_accel</span><span class="o">=</span><span class="n">avg_accel</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="n">avg_accel</span><span class="o">&lt;</span><span class="n">min_accel</span><span class="p">)</span>
  <span class="n">min_accel</span><span class="o">=</span><span class="n">avg_accel</span><span class="p">;</span>
  
<span class="k">if</span><span class="p">(</span><span class="n">avg_accel</span><span class="o">&gt;</span><span class="p">((</span><span class="n">max_accel</span><span class="o">+</span><span class="n">min_accel</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
  <span class="n">points_above</span><span class="o">++</span><span class="p">;</span>
<span class="k">else</span>
  <span class="n">points_below</span><span class="o">++</span><span class="p">;</span></code></pre></div>

<p>Not the most elegant solution, but in hackathons we’ve found often that <em>done is better than perfect</em>.</p>

<p>Combining the two and broadcasting to the front-end, we now had a system that would intimate the ministry about worker safety, and the employer about stress points in his workforce.</p>

<p>It took us an hour to build a casing out of acrylic, add an LED Bar for some visual indication, and use soft plastic to attach it to a hard-hat.</p>

<p><img src="http://localhost:3000/assets/img/IOTHacks/product_closeup.png" alt="Product Image" /></p>

<p>The Front-end functioned admirably, providing a decent feed of live data. I pitched while wearing the product, and the audience could either listen to me or watch the live feed of easy-to-understand information on the projector.</p>

<p><img src="http://localhost:3000/assets/img/IOTHacks/pitch.png" alt="The Pitch" /></p>

<p>The information displayed would be very intuitive to understand, but we added a stream of the other sensors just to demonstrate that the feed was indeed live.</p>

<p><img src="http://localhost:3000/assets/img/IOTHacks/pitch-dashboard.png" alt="Dashboard at the Pitch" /></p>

<p>We received some offers of funding at the end of the pitch - in addition to winning best product - but we decided to make our source public and pick up the project sometime later in the future.</p>

<p>The code for this project can be found <a href="http://github.com/hrishioa/BlackHat">here</a>.</p>

<p><img src="http://localhost:3000/assets/img/IOTHacks/IOTHacks-Photo.jpg" alt="Photo" /></p>

<p>It was an amazing weekend with a lot of beer, and it helped me remember why I spend so many of my weekends at hackathons, losing sleep when I should be catching up on it.</p>


            </article>

            <section class="share">
    <h3>Share</h3>
    <a aria-label="Share on Twitter" href="https://twitter.com/intent/tweet?text=&quot;&quot;%20http://localhost:3000/using-the-internet-of-things-for-measuring-worker-safety/%20via%20&#64;&hashtags=IOT,Hackathon,LinkIT One,Dweet,Hardware,"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
        <svg class="icon icon-twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
    <a aria-label="Share on Facebook"href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:3000/using-the-internet-of-things-for-measuring-worker-safety/"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
        <svg class="icon icon-facebook"><use xlink:href="#icon-facebook"></use></svg>
    </a>
    <a aria-label="Share on Google Plus" href="https://plus.google.com/share?url=http://localhost:3000/using-the-internet-of-things-for-measuring-worker-safety/"
    onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title="Share on Google+">
        <svg class="icon icon-google-plus"><use xlink:href="#icon-google-plus"></use></svg>
    </a>
</section>
            <section class="author" itemprop="author">
    <div class="details" itemscope itemtype="http://schema.org/Person">
        <img itemprop="image" class="img-rounded" src="/assets/img/blog-author.jpg" alt="">
        <p class="def">Author</p>
        <h3 class="name">
            <a itemprop="name" href="https://github.com/hrishioa/">hrishioa</a>
        </h3>
        <p class="desc">Yale-NUS '18.</p>
        <a itemprop="email" class="email" href="mailto:hrishioa@gmail.com">hrishioa@gmail.com</a>
    </div>
</section>

            <section class="comments">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
</section>
<script type="text/javascript">
    var disqus_loaded = false;

    function load_disqus()
    {
        disqus_loaded = true;
        var disqus_shortname = 'hrishioa';
        var disqus_title = 'Using the Internet of Things for measuring Worker Safety';
        var disqus_url = '/using-the-internet-of-things-for-measuring-worker-safety/';
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        var ldr = document.getElementById('disqus_loader');
    };
    window.onscroll = function(e) {
        if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 800)) {
            //hit bottom of page
            if (disqus_loaded==false)
                load_disqus()
        }
    };
</script>
            <footer>
    <p>Theme by <a href="http://willianjusten.com">Willian Justen</a></p>
</footer>
<script src="/assets/js/main.js"></script>
        </section>
    </body>
</html>
